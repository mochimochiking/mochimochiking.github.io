<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title></title>
    <style>
      *{
        font-size: 20px;
        margin: 0px;
        padding: 0px;
      }
      td{
        vertical-align: top;
      }
    </style>
  </head>
  <body bgColor="#eee">
    <table><tr><td><canvas id="canvas1" width="1280" height="720"></canvas></td>
    <td><form name="form1">
      背景色:<input type="text" name="bgColor" value="white"><br>
      背景:<input type="text" name="flg" value="">
      国旗を拡大<input type="checkbox" name="zoom" value="zoom"><br>
      国章:<input type="text" name="emb" value=" "><br>
      タイトル:<input type="text" name="title" value=""><br>
      日本語タイトル:<input type="text" name="titleJa" value=""><br>
      下の文1:<input type="text" name="sita1" value=""><br>
      下の文2:<input type="text" name="sita2" value=""><br>
      歌詞:<textarea name="lyr" rows="4" cols="80">



      </textarea><br>
      歌詞:<textarea name="lyr2" rows="4" cols="80">



      </textarea><br>
      和訳:<textarea name="lyrJa" rows="4" cols="80">



</textarea><br>
      重ね:<textarea name="chunom" rows="4" cols="80">




      </textarea><br>
      ルビ:<textarea name="ruby" rows="4" cols="80">




      </textarea>
      状態:<select name="type">
        <option value="title">タイトル</option>
        <option value="main" selected>メイン</option>
        <option value="end">最後</option>
        <option value="naraberu">並べる</option>
      </select><br>
      フォント:<select name="font">
        <option value="Arial">Arial</option>
        <option value="Calibri">Calibri</option>
        <option value="Century">Century</option>
        <option value="Cambria" selected>Cambria</option>
        <option value="Georgia">Georgia</option>
        <option value="Papyrus">Papyrus</option>
        <option value="Times New Roman">Times New Roman</option>
        <option value="FangSong">FangSong(中華)</option>
        <option value="SimSun">SimSun(中華)</option>
        <option value="KaiTi">Kaiti(中華)</option>
        <option value="KP PusKul">KP PusKul(朝鮮)</option>
        <option value="KP CheongPong">KP CheongPong(朝鮮)</option>
        <option value="KP KwangMyeong">KP KwangMyeong(朝鮮)</option>
        <option value="PKS BG Galpil">PKS BG Galpil(朝鮮)</option>
        <option value="Batang">Batang(韓国)</option>
        <option value="HGP明朝E">HGP明朝E(日本)</option>
        <option value="Source Han Sans K">Source Han Sans K</option>
        <option value="Source Han Serif K">Source Han Serif K</option>
      </select><br>
      文字色:<select name="color">
        <option value="black">black</option>
        <option value="white">white</option>
	<option value="yellow">yellow</option>
      </select><br>
      alpha:<select name="alpha">
        <option value="0">0</option>
        <option value="0.25">0.25</option>
        <option value="0.5">0.5</option>
      </select><br>
      <button type="button" onclick="update()">更新</button>
    </form></td></tr></table>
    <script>
    function update(){
      let s = 1

      let bgColor = document.form1.bgColor.value;
      let flg = document.form1.flg.value;
      let emb = document.form1.emb.value;
      let title = document.form1.title.value;
      let titleJa = document.form1.titleJa.value;
      let sita1 = document.form1.sita1.value;
      let sita2 = document.form1.sita2.value;
      let text = document.form1.lyr.value.split("\n");
      let text2 = document.form1.lyr2.value.split("\n");
      let ja = document.form1.lyrJa.value.split("\n");
      let chunom = document.form1.chunom.value.split("\n");
      let ruby = document.form1.ruby.value.split("\n");
      let type = document.form1.type.value;
      let font = document.form1.font.value;
      let jpFont = "HGP明朝E";
      let color = document.form1.color.value;
      let alpha = document.form1.alpha.value;

      let ctx = document.getElementById("canvas1").getContext('2d');
      ctx.clearRect(0, 0, 1280*s, 720*s);
      ctx.fillStyle =　bgColor;
      ctx.fillRect(0, 0, 1280*s, 720*s);//120*16, 120*9
      let img = new Image();
      img.src = flg;
      img.onload = () => {
        let x,w;
        x=0*s;
        w=1280*s;
        ctx.shadowBlur = 0;
        // ctx.drawImage(img,0,0,img.width,img.height,0,0,1280*s,720*s);
        if((img.width/img.height>16/9&&!document.form1.zoom.checked)||(img.width/img.height<16/9&&document.form1.zoom.checked)){
          ctx.drawImage(img, 0, (720*s-1280*s*img.height/img.width)/2, 1280*s, 1280*s*img.height/img.width);
        }else{
          ctx.drawImage(img, (1280*s-720*s*img.width/img.height)/2, 0, 720*s*img.width/img.height, 720*s);
        }
        // ctx.drawImage(img,0,0,img.height*16/9,img.height,0,0,1280*s,720*s);

        if(type=="title"){
          ctx.fillStyle = color;
          ctx.shadowColor = color=="black"?"white":"black";//影
          ctx.shadowBlur = 20*s;
          ctx.textAlign = "center";
          ctx.font = "160px serif";
         ctx.font = "160px \""+font+"\"";
// // 特殊
// ctx.font = "360px \""+font+"\"";
// ctx.fillText(title, 640*s, 360*s, 1200*s);
// //
         ctx.fillText(title, 640*s, 150*s, 1200*s);
          // ctx.font = "160px serif";
          ctx.font = "160px \""+jpFont+"\""
          ctx.fillText(titleJa, 640*s, 360*s, 1200*s);
          // ctx.font = "60px serif";
          // ctx.fillText(title, 640*s, 400*s, 1200*s);
          ctx.font = "120px \""+jpFont+"\"";
          ctx.fillText(sita1, 640*s, 540*s, 1200*s);
          ctx.fillText(sita2, 640*s, 680*s, 1200*s);
        }else if(type=="end"){
          ctx.fillStyle = color=="black"?"white":"black";
          ctx.globalAlpha = alpha;
          ctx.fillRect(0*s, 0*s, 1280*s, 720*s);
          ctx.globalAlpha = 1;
          let img2 = new Image();
          img2.src = emb;
          img2.onload=()=>{
            ctx.shadowColor = "black"
            ctx.shadowBlur = 100*s;
            ctx.drawImage(img2, 640*s-360*s/img2.height*img2.width, 0*s, 720*s/img2.height*img2.width, 720*s);
          }
        }else if(type=="main"){
          ctx.fillStyle = color=="black"?"white":"black";
          ctx.globalAlpha = alpha;
          ctx.fillRect(0*s, 0, 1280*s, 720*s);


          ctx.globalAlpha = 1;
          ctx.shadowBlur = 10;

          ctx.shadowColor = color=="black"?"white":"black";//影

          for(let i=1; i<=2; i++){
            ctx.textAlign = "left";
            if(true){
              ctx.fillStyle = color;

              ctx.font = "bold 50px \""+font+"\"";
              ctx.fillText(chunom[0], x+40*s, 55*s, w-80*s);
              ctx.fillText(chunom[1], x+40*s, 235*s, w-80*s);
              ctx.fillText(chunom[2], x+40*s, 415*s, w-80*s);
              ctx.fillText(chunom[3], x+40*s, 595*s, w-80*s);

              ctx.font = "bold 50px \""+font+"\"";
              ctx.fillText(text[0], x+40*s, 55*s, w-80*s);
              ctx.fillText(text[1], x+40*s, 235*s, w-80*s);
              ctx.fillText(text[2], x+40*s, 415*s, w-80*s);
              ctx.fillText(text[3], x+40*s, 595*s, w-80*s);

              ctx.fillStyle = color;
              ctx.font = "bold 40px \""+font+"\"";
              ctx.font = "40px \""+jpFont+"\"";
              // ctx.font = "40px \"Cambria\"";

              ctx.fillText(text2[0], x+40*s, 105*s, w-80*s);
              ctx.fillText(text2[1], x+40*s, 285*s, w-80*s);
              ctx.fillText(text2[2], x+40*s, 465*s, w-80*s);
              ctx.fillText(text2[3], x+40*s, 645*s, w-80*s);

              ctx.globalAlpha = 1;
              ctx.font = "40px \""+jpFont+"\"";
              ctx.fillText(ja[0], x+40*s, 150*s, w-40*s);
              ctx.fillText(ja[1], x+40*s, 330*s, w-40*s);
              ctx.fillText(ja[2], x+40*s, 510*s, w-40*s);
              ctx.fillText(ja[3], x+40*s, 690*s, w-40*s);

              ctx.font = "40px \""+font+"\"";
              ctx.font = "40px \"Cambria\"";
              ctx.font = "italic 40px \"Calibri\"";
              ctx.textAlign = "right";
              ctx.fillText(ruby[0], w-40*s, 105*s, w-40*s);
              ctx.fillText(ruby[1], w-40*s, 285*s, w-40*s);
              ctx.fillText(ruby[2], w-40*s, 465*s, w-40*s);
              ctx.fillText(ruby[3], w-40*s, 645*s, w-40*s);
            }else{
              ctx.fillStyle = color;
              // ctx.fillStyle = "#ffde00";
              ctx.font = "bold 50px \""+font+"\"";
              ctx.fillText(text[0], x+40*s, 45*s, w-80*s);
              ctx.fillText(text[1], x+40*s, 185*s, w-80*s);
              ctx.fillText(text[2], x+40*s, 325*s, w-80*s);
              ctx.fillText(text[3], x+40*s, 465*s, w-80*s);
              ctx.fillText(text[4], x+40*s, 605*s, w-80*s);

              ctx.font = "35px \""+jpFont+"\"";

              ctx.fillText(text2[0], x+40*s, 85*s, w-80*s);
              ctx.fillText(text2[1], x+40*s, 225*s, w-80*s);
              ctx.fillText(text2[2], x+40*s, 365*s, w-80*s);
              ctx.fillText(text2[3], x+40*s, 505*s, w-80*s);
              ctx.fillText(text2[4], x+40*s, 645*s, w-80*s);

              ctx.globalAlpha = 1;
              ctx.font = "35px \""+jpFont+"\"";
              ctx.fillText(ja[0], x+40*s, 125*s, w-40*s);
              ctx.fillText(ja[1], x+40*s, 265*s, w-40*s);
              ctx.fillText(ja[2], x+40*s, 405*s, w-40*s);
              ctx.fillText(ja[3], x+40*s, 545*s, w-40*s);
              ctx.fillText(ja[4], x+40*s, 685*s, w-40*s);

              ctx.font = "35px \"Cambria\"";
              ctx.textAlign = "right";
              ctx.fillText(ruby[0], w-40*s, 85*s, w-40*s);
              ctx.fillText(ruby[1], w-40*s, 225*s, w-40*s);
              ctx.fillText(ruby[2], w-40*s, 365*s, w-40*s);
              ctx.fillText(ruby[3], w-40*s, 505*s, w-40*s);
              ctx.fillText(ruby[4], w-40*s, 645*s, w-40*s);
            }
          }

          ctx.globalAlpha = 1;
        }
        else{
          ctx.fillStyle = color=="black"?"white":"black";
          ctx.globalAlpha = alpha;
          ctx.fillRect(0*s, 0, 1280*s, 720*s);

          ctx.textAlign = "center";
          ctx.globalAlpha = 1;
          ctx.shadowBlur = 10;

          ctx.shadowColor = color=="black"?"white":"black";//影

            ctx.fillStyle = color;
            ctx.font = "70px \"Simplified Arabic\"";
            ctx.fillText(text[0], x+640*s, 90*s, w-80*s);
            ctx.font = "60px \""+font+"\"";
            ctx.fillText(text[1], x+640*s, 190*s, w-80*s);
            ctx.fillText(text[2], x+640*s, 290*s, w-80*s);
            ctx.fillText(text[3], x+640*s, 390*s, w-80*s);
            ctx.fillText(text[4], x+640*s, 490*s, w-80*s);
            ctx.fillText(text[5], x+640*s, 590*s, w-80*s);
            ctx.fillText(text[6], x+640*s, 690*s, w-80*s);

        }
      }
    }
    window.onload = update();
    </script>
  </body>
</html>
