<input type="text" id="input" placeholder="準備中" readonly/><input type="button" value="翻訳" onclick="change()"><br>
<canvas id="canvas" width="1200" height="1200"></canvas><br>
<script>

const LOADIMG = ["https://upload.wikimedia.org/wikipedia/commons/1/10/Topographic90deg_N0W90.png",
"https://upload.wikimedia.org/wikipedia/commons/4/44/Topographic90deg_N0W0.png",
"https://upload.wikimedia.org/wikipedia/commons/9/99/Topographic90deg_N0E0.png",
"https://upload.wikimedia.org/wikipedia/commons/b/ba/Topographic90deg_N0E90.png",
"https://upload.wikimedia.org/wikipedia/commons/6/67/Topographic90deg_S0W90.png",
"https://upload.wikimedia.org/wikipedia/commons/7/75/Topographic90deg_S0W0.png",
"https://upload.wikimedia.org/wikipedia/commons/8/89/Topographic90deg_S0E0.png",
"https://upload.wikimedia.org/wikipedia/commons/2/2a/Topographic90deg_S0E90.png"];
const LANG = {
  ja: ["日本語", 137, -35],
  ko: ["韓国語", 127, -38],
  "zh-CN": ["中国語(簡体)", 108, -35],
  "zh-TW": ["中国語(繁体)", 121, -24],
  mn: ["モンゴル語", 105, -47],
  vi: ["ベトナム語", 108, -18],
  lo: ["ラオ語", 102, -21],
  th: ["タイ語", 99, -16],
  km: ["クメール語", 105, -12],
  my: ["ミャンマー語", 97, -22],
  hmn: ["モン語", 97, -13],
  ceb: ["セブアノ語", 125, -7],
  tl: ["タガログ語", 122, -14],
  ms: ["マレー語", 108, -5],
  tl: ["インドネシア語", 102, 2],
  jv: ["ジャワ語", 110, 7]
};
let loaded = 0;
const ctx = document.getElementById("canvas").getContext('2d');
let imgs = Array(8);
for(let i in LOADIMG){
  imgs[i] = new Image();
  imgs[i].src = LOADIMG[i];
  imgs[i].onload = () => {
    loaded++;
    if(loaded == 8){
      document.getElementById("input").placeholder="入力できます";
      document.getElementById("input").readOnly=false;
      draw();
    }
  };
}


function change(){
  draw();
  function translate(target){
    let input = document.getElementById("input").value;
    if(target != "ja"){
      fetch(`https://script.google.com/macros/s/AKfycbzNRZ7XmiVM4kKZdfV2IAp7I-ENutCfyrhMlgNr/exec?text=${input}&source=ja&target=${target}`)
        .then(response => response.text())
        .then(text => {
          // ctx.fillText(LANG[target][0], 200+LANG[target][1]*20/3, 600+LANG[target][2]*20/3);
          ctx.fillText(text, 200+LANG[target][1]*20/3, 600+LANG[target][2]*20/3+10);
        });
    }else{
        text = input;
        // ctx.fillText(LANG[target][0], 200+LANG[target][1]*20/3, 600+LANG[target][2]*20/3);
        ctx.fillText(text, 200+LANG[target][1]*20/3, 600+LANG[target][2]*20/3+10);
    }
  }

  for(let output in LANG){
    ctx.fillStyle = "black";
    ctx.font = "bold 15px serif";
    ctx.textAlign = "center";
    translate(output);
  }
}

function draw(){
  ctx.clearRect(0, 0, 1200, 1200);
  ctx.drawImage(imgs[0], 0, 0, 1800, 1800, -1000, 0, 600, 600);
  ctx.drawImage(imgs[1], 0, 0, 1800, 1800, -400, 0, 600, 600);
  ctx.drawImage(imgs[2], 0, 0, 1800, 1800, 200, 0, 600, 600);
  ctx.drawImage(imgs[3], 0, 0, 1800, 1800, 800, 0, 600, 600);
  ctx.drawImage(imgs[4], 0, 0, 1800, 1800, -1000, 600, 600, 600);
  ctx.drawImage(imgs[5], 0, 0, 1800, 1800, -400, 600, 600, 600);
  ctx.drawImage(imgs[6], 0, 0, 1800, 1800, 200, 600, 600, 600);
  ctx.drawImage(imgs[7], 0, 0, 1800, 1800, 800, 600, 600, 600);
}
</script>
